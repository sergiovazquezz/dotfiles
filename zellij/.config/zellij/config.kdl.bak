theme "catppuccin-mocha"

default_shell "zsh"
pane_frames false
simplified_ui true
default_layout "compact"
copy_on_select true
scrollback_editor "nvim"

keybinds clear-defaults=true {
    normal {
        // Pane navigation with Ctrl + vim motions
        bind "Ctrl h" { MoveFocus "Left"; }
        bind "Ctrl j" { MoveFocus "Down"; }
        bind "Ctrl k" { MoveFocus "Up"; }
        bind "Ctrl l" { MoveFocus "Right"; }


        // Tab navigation with Command + vim motions
        bind "Super h" { GoToPreviousTab; }
        bind "Super l" { GoToNextTab; }

        // New panes
        bind "Ctrl v" { NewPane "Right"; }
        bind "Ctrl s" { NewPane "Down"; }

        // New tab and rename
        bind "Super t" { NewTab; }

        bind "Super w" { CloseTab; }
        bind "Ctrl w" { CloseFocus; }
        bind "Super Shift i" { SwitchToMode "RenameTab"; }

        // Direct tab access
        bind "Super 1" { GoToTab 1; }
        bind "Super 2" { GoToTab 2; }
        bind "Super 3" { GoToTab 3; }
        bind "Super 4" { GoToTab 4; }
        bind "Super 5" { GoToTab 5; }
        bind "Super 6" { GoToTab 6; }
        bind "Super 7" { GoToTab 7; }
        bind "Super 8" { GoToTab 8; }
        bind "Super 9" { GoToTab 9; }

        // Enter resize mode
        bind "Super r" { SwitchToMode "resize"; }

        // Scroll mode
        bind "Ctrl e" { SwitchToMode "scroll"; }

        // Search in scrollback
        bind "Super f" { SwitchToMode "search"; }

        // Session operations
        bind "Super d" { Detach; }
        bind "Super s" { SwitchToMode "session"; }

        // Quit
        bind "Ctrl q" { Quit; }

    }

    resize {
        bind "h" "Left" { Resize "Increase Left"; }
        bind "j" "Down" { Resize "Increase Down"; }
        bind "k" "Up" { Resize "Increase Up"; }
        bind "l" "Right" { Resize "Increase Right"; }
        bind "H" { Resize "Decrease Left"; }
        bind "J" { Resize "Decrease Down"; }
        bind "K" { Resize "Decrease Up"; }
        bind "L" { Resize "Decrease Right"; }
        bind "=" { Resize "Increase"; }
        bind "-" { Resize "Decrease"; }
        bind "Esc" { SwitchToMode "normal"; }
    }

    scroll {
        bind "j" "Down" { ScrollDown; }
        bind "k" "Up" { ScrollUp; }
        bind "Ctrl d" { HalfPageScrollDown; }
        bind "Ctrl u" { HalfPageScrollUp; }
        bind "d" { PageScrollDown; }
        bind "u" { PageScrollUp; }
        bind "e" { EditScrollback; }
        bind "/" { SwitchToMode "search"; }
        bind "Esc" { SwitchToMode "normal"; }
    }

    search {
        bind "j" "Down" { ScrollDown; }
        bind "k" "Up" { ScrollUp; }
        bind "Ctrl d" { HalfPageScrollDown; }
        bind "Ctrl u" { HalfPageScrollUp; }
        bind "n" { Search "down"; }
        bind "N" { Search "up"; }
        bind "c" { SearchToggleOption "CaseSensitivity"; }
        bind "w" { SearchToggleOption "Wrap"; }
        bind "o" { SearchToggleOption "WholeWord"; }
        bind "Esc" { SwitchToMode "normal"; }
    }

    renametab {
        bind "Enter" { SwitchToMode "Normal"; }
        bind "Esc" { UndoRenameTab; SwitchToMode "Normal"; }
    }

    session {
        // Open session manager
        bind "w" {
            LaunchOrFocusPlugin "session-manager" {
                floating true
                move_to_focused_tab true
            }
            SwitchToMode "normal"
        }

        // Detach from current session
        bind "d" { Detach; }

        // Return to normal mode
        bind "Esc" { SwitchToMode "normal"; }
    }
}
